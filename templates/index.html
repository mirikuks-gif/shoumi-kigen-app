<!DOCTYPE html>
<html lang="ja">
<head>
    {% load static %}
    <meta charset="utf-8">
    <title>è³å‘³æœŸé™ç®¡ç†ã‚¢ãƒ—ãƒª - ãƒ›ãƒ¼ãƒ </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#2196f3">
    <link rel="manifest" href="{% static 'manifest.json' %}">
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
</head>
<body>
    <main class="page">
        <h1>ãƒ›ãƒ¼ãƒ </h1>

        {% if request.user.is_authenticated %}
            <p class="welcome">ã‚ˆã†ã“ãã€{{ request.user.username }} ã•ã‚“</p>

            <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ -->
            <nav class="nav-links">
                <a href="{% url 'item_add' %}" class="btn-main">ğŸ“ é£Ÿæã®æ–°è¦ç™»éŒ²</a>
                <a href="{% url 'item_list' %}" class="btn-main">ğŸ² ãƒ¬ã‚·ãƒ”æ¤œç´¢ãƒ»åœ¨åº«ä¸€è¦§</a>
                <a href="{% url 'item_quick_add_list' %}" class="btn-sub">ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯è¿½åŠ </a>
                <a href="{% url 'usage_history' %}" class="btn-sub">ğŸ•’ ä½¿ç”¨å±¥æ­´</a>
            </nav>

            <h2>æœŸé™ãŒä¸€é€±é–“ä»¥å†…ã®é£Ÿæ</h2>
            <hr>
            {% if item_list %}
            <table class="table-list">
                <thead>
                    <tr>
                        <th>é£Ÿæå</th>
                        <th>ä¿å­˜å ´æ‰€</th>
                        <th>è³å‘³æœŸé™</th>
                        <th>æ•°é‡</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in item_list %}
                    <tr>
                        <td>{{ item.name }}</td>
                        <td>{{ item.location.name }}</td>
                        <td>{{ item.expiry_date|date:"Y/m/d" }}</td>
                        <td>{{ item.quantity }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="no-items">ã“ã®ä¸€é€±é–“ã§æœŸé™åˆ‡ã‚Œã«ãªã‚‹é£Ÿæã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å®‰å¿ƒã§ã™ã­ï¼</p>
            {% endif %}

            <hr>
            <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" class="btn-logout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            </form>
        {% else %}
            <p>ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚</p>
            <nav class="nav-links">
                <a href="{% url 'login' %}" class="btn-link">ğŸ”‘ ãƒ­ã‚°ã‚¤ãƒ³</a>
                <a href="{% url 'signup' %}" class="btn-link">ğŸ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²</a>
            </nav>
        {% endif %}

        <footer>
            <p>&copy; 2024 è³å‘³æœŸé™ç®¡ç†ã‚¢ãƒ—ãƒª</p>
        </footer>
    </main>
    <script>
    if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register("/static/service-worker.js", { scope: '/static/' })
        .then(reg => console.log("Service Worker registered:", reg))
        .catch(err => console.log("Service Worker registration failed:", err));
    }
    </script>
</body>
</html>
